{"version":3,"file":"component---src-mdx-intro-to-probabilistic-linkage-mdx-861307980a75289e5ec9.js","mappings":"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","sources":["webpack://robinlinacre/./node_modules/@robinl/d51533bbe054b3d8/79750b3b8e929d9d@209.js","webpack://robinlinacre/./node_modules/@robinl/d51533bbe054b3d8/d25176b0fe784ad0@488.js","webpack://robinlinacre/./node_modules/@robinl/d51533bbe054b3d8/843cb6e82d7c3d9b@474.js","webpack://robinlinacre/./node_modules/@robinl/d51533bbe054b3d8/d51533bbe054b3d8@510.js","webpack://robinlinacre/./src/mdx/intro_to_probabilistic_linkage.mdx","webpack://robinlinacre/./src/components/CompactTutorialNav.jsx","webpack://robinlinacre/./src/components/ObservableNotebook.jsx","webpack://robinlinacre/./src/hooks/use-site-metadata.jsx","webpack://robinlinacre/./src/components/SEO.jsx","webpack://robinlinacre/./src/components/TutorialNav.jsx"],"sourcesContent":["// https://observablehq.com/@uwdata/arquero@209\nfunction _1(md){return(\nmd`# Arquero\n\nArquero is a library for query processing and transformation of array-backed data tables. Following the [relational algebra](https://en.wikipedia.org/wiki/Relational_algebra) and inspired by the design of [dplyr](https://dplyr.tidyverse.org/), Arquero provides a fluent API for manipulating column-oriented data frames. Arquero supports a range of data transformation tasks, including filter, sample, aggregation, window, join, and reshaping operations. Arquero is Spanish for \"archer\": if datasets are [arrows](https://observablehq.com/@theneuralbit/introduction-to-apache-arrow), Arquero helps their aim stay true.`\n)}\n\nfunction _2(md){return(\nmd`Import Arquero and extend it to print HTML tables in Observable:`\n)}\n\nasync function _aq(require,aq_version,aq_packages,toView)\n{\n  const aq = await require(`arquero@${aq_version}`);\n\n  // load and install any additional packages\n  (await Promise.all(aq_packages.map(pkg => require(pkg))))\n    .forEach(pkg => aq.addPackage(pkg));\n\n  // Add HTML table view method to tables\n  aq.addTableMethod('view', toView, { override: true });\n\n  return aq;\n}\n\n\nfunction _aq_version(){return(\n'4.2.0'\n)}\n\nfunction _aq_packages(){return(\n[]\n)}\n\nfunction _6(md){return(\nmd`Export a global reference to Arquero operations:`\n)}\n\nfunction _op(aq){return(\naq.op\n)}\n\nfunction _8(md){return(\nmd`To use the same setup in your own notebooks, add a cell with the following code:\n~~~ js\nimport { aq, op } from '@uwdata/arquero'\n~~~\n`\n)}\n\nfunction _9(md){return(\nmd`To get started, see the [Introducing Arquero](https://observablehq.com/@uwdata/introducing-arquero) and [Arquero Cookbook](https://observablehq.com/@uwdata/arquero-cookbook) notebooks.`\n)}\n\nfunction _10(md){return(\nmd`To use Arquero outside of Observable, see [https://github.com/uwdata/arquero](https://github.com/uwdata/arquero).`\n)}\n\nfunction _11(md){return(\nmd`<hr>\n## Examples\n\nThe core abstractions in Arquero are *data tables*, which model each column as an array of values, and *verbs* that transform data and return new tables. Verbs are table methods, allowing method chaining for multi-step transformations. Though each table is unique, many verbs reuse the underlying columns to limit duplication.\n`\n)}\n\nfunction _12(md){return(\nmd`Average hours of sunshine per month, from [https://usclimatedata.com/](https://usclimatedata.com/):`\n)}\n\nfunction _dt(aq){return(\naq.table({\n  'Seattle': [69, 108, 178, 207, 253, 268, 312, 281, 221, 142, 72, 52],\n  'Chicago': [135, 136, 187, 215, 281, 311, 318, 283, 226, 193, 113, 106],\n  'San Francisco': [165, 182, 251, 281, 314, 330, 300, 272, 267, 243, 189, 156]\n})\n)}\n\nfunction _14(md){return(\nmd`Sorted differences between Seattle and Chicago:`\n)}\n\nfunction _15(dt,op){return(\ndt.derive({\n    month: d => op.row_number(),\n    diff:  d => d.Seattle - d.Chicago\n  })\n  .select('month', 'diff')\n  .orderby('month')\n  .view({ height: 400 })\n)}\n\nfunction _16(md){return(\nmd`Is Seattle more correlated with San Francisco or Chicago?`\n)}\n\nfunction _17(dt,op){return(\ndt.rollup({\n    corr_sf:  op.corr('Seattle', 'San Francisco'),\n    corr_chi: op.corr('Seattle', 'Chicago')\n  })\n  .view()\n)}\n\nfunction _18(md){return(\nmd`Summary statistics per city, as output objects:`\n)}\n\nfunction _19(dt,aq,op){return(\ndt.fold(aq.all(), { as: ['city', 'sun'] })\n  .groupby('city')\n  .rollup({\n    min:  d => op.min(d.sun), // functional form of op.min('sun')\n    max:  d => op.max(d.sun),\n    avg:  d => op.average(d.sun),\n    med:  d => op.median(d.sun),\n    // functional forms permit flexible table expressions\n    skew: ({sun: s}) => (op.mean(s) - op.median(s)) / op.stdev(s) || 0\n  })\n  .objects()\n)}\n\nfunction _20(md){return(\nmd`<hr>\n## Utilities\n`\n)}\n\nfunction _toView(html)\n{\n  const DEFAULT_LIMIT = 100;\n  const DEFAULT_NULL = value => `<span style=\"color: #999;\">${value}</span>`;\n  const tableStyle = 'margin: 0; border-collapse: collapse; width: initial;';\n  const cellStyle = 'padding: 1px 5px; white-space: nowrap; overflow-x: hidden; text-overflow: ellipsis; font-variant-numeric: tabular-nums;';\n\n  // extend table prototype to provide an HTML table view\n  return function(dt, opt = {}) {\n    // permit shorthand for limit\n    if (typeof opt === 'number') opt = { limit: opt };\n    \n    // marshal cell color options\n    const color = { ...opt.color };\n    if (typeof opt.color === 'function') {\n      // if function, apply to all columns\n      dt.columnNames().forEach(name => color[name] = opt.color);\n    } else {\n      // otherwise, gather per-column color options\n      for (const key in color) {\n        const value = color[key];\n        color[key] = typeof value === 'function' ? value : () => value;\n      }\n    }\n\n    // marshal CSS styles as toHTML() options\n    const table = `${tableStyle}`;\n    const td = (name, index, row) => {\n      return `${cellStyle} max-width: ${+opt.maxCellWidth || 300}px;`\n        + (color[name] ? ` background-color: ${color[name](index, row)};` : '');\n    };\n\n    opt = {\n      limit: DEFAULT_LIMIT,\n      null: DEFAULT_NULL,\n      ...opt,\n      style: { table, td, th: td }\n    };\n\n    // return container div, bind table value to support viewof operator\n    const size = `max-height: ${+opt.height || 270}px`;\n    const style = `${size}; overflow-x: auto; overflow-y: auto;`;\n    const view = html`<div style=\"${style}\">${dt.toHTML(opt)}</div>`;\n    view.value = dt;\n    return view;\n  };\n}\n\n\nexport default function define(runtime, observer) {\n  const main = runtime.module();\n  main.variable(observer()).define([\"md\"], _1);\n  main.variable(observer()).define([\"md\"], _2);\n  main.variable(observer(\"aq\")).define(\"aq\", [\"require\",\"aq_version\",\"aq_packages\",\"toView\"], _aq);\n  main.variable(observer(\"aq_version\")).define(\"aq_version\", _aq_version);\n  main.variable(observer(\"aq_packages\")).define(\"aq_packages\", _aq_packages);\n  main.variable(observer()).define([\"md\"], _6);\n  main.variable(observer(\"op\")).define(\"op\", [\"aq\"], _op);\n  main.variable(observer()).define([\"md\"], _8);\n  main.variable(observer()).define([\"md\"], _9);\n  main.variable(observer()).define([\"md\"], _10);\n  main.variable(observer()).define([\"md\"], _11);\n  main.variable(observer()).define([\"md\"], _12);\n  main.variable(observer(\"dt\")).define(\"dt\", [\"aq\"], _dt);\n  main.variable(observer()).define([\"md\"], _14);\n  main.variable(observer()).define([\"dt\",\"op\"], _15);\n  main.variable(observer()).define([\"md\"], _16);\n  main.variable(observer()).define([\"dt\",\"op\"], _17);\n  main.variable(observer()).define([\"md\"], _18);\n  main.variable(observer()).define([\"dt\",\"aq\",\"op\"], _19);\n  main.variable(observer()).define([\"md\"], _20);\n  main.variable(observer(\"toView\")).define(\"toView\", [\"html\"], _toView);\n  return main;\n}\n","import define1 from \"./79750b3b8e929d9d@209.js\";\n\nfunction _1(md){return(\nmd`# Fellegi Sunter utils`\n)}\n\nfunction _records_l(){return(\n[\n  {\n    uid: \"1_l\",\n    fname: \"John\",\n    sname: \"Smith\",\n    dob: \"1989-03-02\",\n    town: \"Bristol\"\n  },\n  {\n    uid: \"2_l\",\n    fname: \"Tom\",\n    sname: \"Hanks\",\n    dob: \"1956-07-09\",\n    town: \"Concord\"\n  },\n  {\n    uid: \"3_l\",\n    fname: \"David\",\n    sname: \"Smith\",\n    dob: \"1981-08-21\",\n    town: \"London\"\n  }\n]\n)}\n\nfunction _records_r(){return(\n[\n  {\n    uid: \"1_r\",\n    fname: \"Jonathan\",\n    sname: \"Smith\",\n    dob: \"1989-03-02\",\n    town: \"Bristol\"\n  },\n  {\n    uid: \"2_r\",\n    fname: \"David\",\n    sname: \"Smith\",\n    dob: \"1981-08-21\",\n    town: \"Peckham\"\n  }\n]\n)}\n\nfunction _df_r(aq,records_r){return(\naq.from(records_r)\n)}\n\nfunction _splink_settings()\n{\n  return {\n    proportion_of_matches: 1 / 100,\n    comparison_columns: [\n      {\n        num_levels: 3,\n        col_name: \"fname\",\n        u_probabilities: [0.8, 0.2],\n        m_probabilities: [0.2, 0.8],\n        case_expression: (row) => {\n          if (row.fname_l == row.fname_r) {\n            return 1;\n          } else {\n            return 0;\n          }\n        }\n      },\n      {\n        num_levels: 3,\n        col_name: \"sname\",\n        u_probabilities: [0.9, 0.1],\n        m_probabilities: [0.2, 0.8],\n        case_expression: (row) => {\n          if (row.sname_l == row.sname_r) {\n            return 1;\n          } else {\n            return 0;\n          }\n        }\n      },\n      {\n        col_name: \"dob\",\n        u_probabilities: [0.99, 0.01],\n        m_probabilities: [0.2, 0.8],\n        case_expression: (row) => {\n          if (row.dob_l == row.dob_r) {\n            return 1;\n          } else {\n            return 0;\n          }\n        }\n      },\n      {\n        col_name: \"town\",\n        u_probabilities: [0.7, 0.3],\n        m_probabilities: [0.3, 0.7],\n        case_expression: (row) => {\n          if (row.town_l == row.town_r) {\n            return 1;\n          } else {\n            return 0;\n          }\n        }\n      }\n    ]\n  };\n}\n\n\nfunction _df_comparison(get_df_comparison,records_l,records_r){return(\nget_df_comparison(records_l, records_r)\n)}\n\nfunction _7(df_comparison){return(\ndf_comparison.view()\n)}\n\nfunction _df_gammas(get_df_gammas,df_comparison,splink_settings){return(\nget_df_gammas(df_comparison, splink_settings)\n)}\n\nfunction _9(df_gammas){return(\ndf_gammas.view()\n)}\n\nfunction _10(get_df_e,df_gammas,splink_settings,term_freqs){return(\nget_df_e(df_gammas, splink_settings, term_freqs).view()\n)}\n\nfunction _get_df_e(get_match_probability,aq){return(\nfunction get_df_e(df_gammas, splink_settings, term_freqs = {}) {\n  let df_e = df_gammas.objects().map(function (row) {\n    row[\"match_probability\"] = get_match_probability(\n      row,\n      splink_settings,\n      term_freqs\n    );\n    return row;\n  });\n  let df = aq.from(df_e);\n  df = df.relocate([\"match_probability\"], { after: \"uid_r\" });\n  return df;\n}\n)}\n\nfunction _get_match_probability(prob_to_log2_bf,log2_bf_to_prob){return(\nfunction (row, settings, term_freqs = {}) {\n  let comparison_columns = settings.comparison_columns;\n  let prior_log2_bg = prob_to_log2_bf(settings.proportion_of_matches);\n\n  let log2_bayes = comparison_columns.reduce((a, cc) => {\n    let gamma_col_name = \"ùõæ_\" + cc.col_name;\n    let gamma = row[gamma_col_name];\n\n    // gamma = -1 means one side of the comparison is null\n    if (gamma == -1) {\n      return a;\n    }\n\n    let m = cc[\"m_probabilities\"][gamma];\n    let u = cc[\"u_probabilities\"][gamma];\n\n    // If TF lookup provided, attempt to use to overwrite u\n    let l_val = row[cc.col_name + \"_l\"].toLowerCase();\n    let r_val = row[cc.col_name + \"_r\"].toLowerCase();\n\n    if (l_val == r_val) {\n      if (cc.col_name in term_freqs) {\n        let tfs = term_freqs[cc.col_name];\n\n        let u_l = tfs[l_val] || 0;\n        let u_r = tfs[r_val] || 0;\n        let u_new = Math.max(u_l, u_r);\n        if (u_new > 0) {\n          u = u_new;\n        }\n      }\n    }\n\n    return a + Math.log2(m / u);\n  }, prior_log2_bg);\n\n  return log2_bf_to_prob(log2_bayes);\n}\n)}\n\nfunction _get_match_probability_components(prob_to_log2_bf,log2_bf_to_prob){return(\nfunction (row, settings, num_columns) {\n  if (num_columns == undefined) {\n    num_columns = settings.comparison_columns.length;\n  }\n  let comparison_columns = settings.comparison_columns.slice(0, num_columns);\n  let prior_log2_bg = prob_to_log2_bf(settings.proportion_of_matches);\n\n  let d = {\n    comparison_vector: [],\n    gamma_symbols: [],\n    m_values: [],\n    u_values: [],\n    m_symbols: [],\n    u_symbols: [],\n\n    bayes_factors: [],\n    log2_bayes_factors: [],\n    col_names: [],\n    match_probability: null,\n    lam: settings.proportion_of_matches\n  };\n\n  comparison_columns.forEach((cc) => {\n    let col_name = \"ùõæ_\" + cc.col_name;\n    let gamma = row[col_name];\n    let m = cc[\"m_probabilities\"][gamma];\n    let u = cc[\"u_probabilities\"][gamma];\n    let col_name_escaped = cc.col_name.replace(\"_\", \"\\\\_\");\n\n    d[\"comparison_vector\"].push(gamma);\n    d[\"gamma_symbols\"].push(`\\\\gamma_\\\\text{${col_name_escaped}}`);\n    d[\"col_names\"].push(col_name);\n    d[\"m_values\"].push(m);\n    d[\"m_symbols\"].push(`m_{\\\\text{${col_name_escaped}},${gamma}}`);\n    d[\"u_values\"].push(u);\n    d[\"u_symbols\"].push(`u_{\\\\text{${col_name_escaped}},${gamma}}`);\n    d[\"bayes_factors\"].push(m / u);\n    d[\"log2_bayes_factors\"].push(Math.log2(m / u));\n  });\n\n  let log2_bayes = d[\"log2_bayes_factors\"].reduce((a, bf) => {\n    return a + bf;\n  }, prior_log2_bg);\n\n  d[\"match_probability\"] = log2_bf_to_prob(log2_bayes);\n  let lam = settings.proportion_of_matches;\n  d[\"size_of_match_portion\"] = lam * d[\"m_values\"].reduce((a, b) => a * b, 1);\n  d[\"size_of_non_match_portion\"] =\n    (1 - lam) * d[\"u_values\"].reduce((a, b) => a * b, 1);\n  return d;\n}\n)}\n\nfunction _get_m_u_formula_numbers(get_match_probability_components){return(\nfunction(row, settings, num_columns) {\n  let d = get_match_probability_components(row, settings, num_columns);\n  let m = d[\"m_values\"].map(d => d.toPrecision(3));\n  let u = d[\"u_values\"].map(d => d.toPrecision(3));\n  let lam = d[\"lam\"].toPrecision(3);\n  let lam_m = [lam].concat(m);\n  let lam_u = [`(1 - ${lam})`].concat(u);\n\n  let m_tex = lam_m.join(\" \\\\times \");\n  let u_tex = lam_u.join(\" \\\\times \");\n\n  let p = d[\"match_probability\"].toPrecision(3);\n  let m_part = d[\"size_of_match_portion\"].toPrecision(3);\n  let u_part = d[\"size_of_non_match_portion\"].toPrecision(3);\n  return `\\\\frac{${m_tex}}{(${m_tex}) + (${u_tex})}  \\\\newline\\[10pt] = \\\\frac{${m_part}}{${m_part} + ${u_part}}  \\\\newline\\[10pt] = ${p}`;\n}\n)}\n\nfunction _get_m_u_formula_symbols(get_match_probability_components){return(\nfunction(row, settings) {\n  let d = get_match_probability_components(row, settings);\n  let m = d[\"m_symbols\"];\n  let u = d[\"u_symbols\"];\n  let lam = d[\"lam\"];\n  let lam_m = [\"\\\\lambda\"].concat(m);\n  let lam_u = [`(1 - \\\\lambda)`].concat(u);\n  let m_tex = lam_m.join(\" \");\n  let u_tex = lam_u.join(\" \");\n\n  return `\\\\frac{${m_tex}}{${m_tex}) + ${u_tex}}`;\n}\n)}\n\nfunction _16(tex,get_m_u_formula_symbols,df_gammas,splink_settings){return(\ntex`${get_m_u_formula_symbols(df_gammas.objects()[0], splink_settings)}\n`\n)}\n\nfunction _get_comparison_vector_symbols_and_numbers(get_match_probability_components){return(\nfunction (\n  row,\n  settings,\n  num_columns\n) {\n  let d = get_match_probability_components(row, settings, num_columns);\n  let joined = d[\"gamma_symbols\"].join(\", \");\n  let joined2 = d[\"comparison_vector\"].join(\", \");\n  return `\\\\bm{\\\\gamma} = [${joined}]= [${joined2}]`;\n}\n)}\n\nfunction _18(tex,get_comparison_vector_symbols_and_numbers,df_gammas,splink_settings){return(\ntex`${get_comparison_vector_symbols_and_numbers(\n  df_gammas.objects()[0],\n  splink_settings\n)}\n`\n)}\n\nfunction _19(tex){return(\ntex`\\bm{\\gamma} = [\\gamma_\\text{fname}, \\gamma_\\text{sname}]`\n)}\n\nfunction _20(tex,get_m_u_formula_numbers,df_gammas,splink_settings){return(\ntex`${get_m_u_formula_numbers(df_gammas.objects()[0], splink_settings)}`\n)}\n\nfunction _21(get_match_probability_components,df_gammas,splink_settings)\n{\n  return get_match_probability_components(\n    df_gammas.objects()[0],\n    splink_settings\n  );\n}\n\n\nfunction _get_df_comparison(aq){return(\nfunction (records_as_dict_l, records_as_dict_r) {\n  let df_l = aq.from(records_as_dict_l);\n  let df_r = aq.from(records_as_dict_r);\n  let df_comparison = df_l.join(df_r, (a, b) => true, null, {\n    suffix: [\"_l\", \"_r\"]\n  });\n\n  // Group columns\n  let colname_no_suffix = df_l.columnNames();\n\n  let cols_ordered = [];\n  colname_no_suffix.forEach((d) => {\n    cols_ordered.push(d + \"_l\");\n    cols_ordered.push(d + \"_r\");\n  });\n\n  df_comparison = df_comparison.select(cols_ordered);\n\n  return df_comparison;\n}\n)}\n\nfunction _get_df_gammas(aq){return(\nfunction get_df_gammas(df_comparison, splink_settings) {\n  let comparison_columns = splink_settings[\"comparison_columns\"];\n  // let df_gammas = df_comparison;\n  // let derivation = {};\n  // comparison_columns.forEach(function (cc) {\n  //   derivation[\"ùõæ_\" + cc.col_name] = cc.case_expression;\n  // });\n\n  // df_gammas = df_gammas.derive(derivation);\n\n  // Since we want function calls like double metaphone in our comparison columns, we need to\n  // roundtrip from aq -> object -> aq\n\n  let df_gammas = df_comparison.objects();\n\n  comparison_columns.forEach(function (cc) {\n    df_gammas.forEach(function (row) {\n      row[\"ùõæ_\" + cc.col_name] = cc.case_expression(row);\n    });\n  });\n\n  df_gammas = aq.from(df_gammas);\n\n  // Put columns in order\n  let col_order = [\"uid_l\", \"uid_r\"];\n  comparison_columns.forEach((cc) => {\n    col_order.push(cc.col_name + \"_l\");\n    col_order.push(cc.col_name + \"_r\");\n    col_order.push(\"ùõæ_\" + cc.col_name);\n  });\n\n  df_gammas = df_gammas.select(col_order);\n\n  return df_gammas;\n}\n)}\n\nfunction _bayes_factor_to_prob(){return(\nfunction bayes_factor_to_prob(b) {\n  return b / (b + 1);\n}\n)}\n\nfunction _log2_bf_to_prob(bayes_factor_to_prob){return(\nfunction log2_bf_to_prob(b) {\n  return bayes_factor_to_prob(2 ** b);\n}\n)}\n\nfunction _prob_to_bayes_factor(){return(\nfunction prob_to_bayes_factor(p) {\n  return p / (1 - p);\n}\n)}\n\nfunction _prob_to_log2_bf(prob_to_bayes_factor){return(\nfunction prob_to_log2_bf(p) {\n  return Math.log2(prob_to_bayes_factor(p));\n}\n)}\n\nfunction _first_name_lookup(d3)\n{\n  return d3\n    .csv(\n      \"https://gist.githubusercontent.com/RobinL/0ee2e59db8cbecc105942fe4b101e847/raw/110e5bb3b574b7584b5452d4accfcfad71f2b19d/first_name_noyear.csv\",\n      d3.autoType\n    )\n    .then((csv_file) => {\n      let lookup = {};\n      csv_file.forEach((row) => {\n        lookup[row.firstname] = row.freq;\n      });\n      return lookup;\n    });\n}\n\n\nfunction _surname_lookup(d3)\n{\n  return d3\n    .csv(\n      \"https://gist.githubusercontent.com/RobinL/0ee2e59db8cbecc105942fe4b101e847/raw/110e5bb3b574b7584b5452d4accfcfad71f2b19d/last_name.csv\",\n      d3.autoType\n    )\n    .then((csv_file) => {\n      let lookup = {};\n      csv_file.forEach((row) => {\n        lookup[row.surname] = row.freq;\n      });\n      return lookup;\n    });\n}\n\n\nfunction _term_freqs(first_name_lookup,surname_lookup)\n{\n  return {\n    fname: first_name_lookup,\n    sname: surname_lookup\n  };\n}\n\n\nfunction _32(term_freqs){return(\nterm_freqs.fname[\"joshua\"]\n)}\n\nfunction _33(term_freqs){return(\nterm_freqs.sname[\"linacre\"]\n)}\n\nexport default function define(runtime, observer) {\n  const main = runtime.module();\n  main.variable(observer()).define([\"md\"], _1);\n  main.variable(observer(\"records_l\")).define(\"records_l\", _records_l);\n  main.variable(observer(\"records_r\")).define(\"records_r\", _records_r);\n  main.variable(observer(\"df_r\")).define(\"df_r\", [\"aq\",\"records_r\"], _df_r);\n  main.variable(observer(\"splink_settings\")).define(\"splink_settings\", _splink_settings);\n  main.variable(observer(\"df_comparison\")).define(\"df_comparison\", [\"get_df_comparison\",\"records_l\",\"records_r\"], _df_comparison);\n  main.variable(observer()).define([\"df_comparison\"], _7);\n  main.variable(observer(\"df_gammas\")).define(\"df_gammas\", [\"get_df_gammas\",\"df_comparison\",\"splink_settings\"], _df_gammas);\n  main.variable(observer()).define([\"df_gammas\"], _9);\n  main.variable(observer()).define([\"get_df_e\",\"df_gammas\",\"splink_settings\",\"term_freqs\"], _10);\n  main.variable(observer(\"get_df_e\")).define(\"get_df_e\", [\"get_match_probability\",\"aq\"], _get_df_e);\n  main.variable(observer(\"get_match_probability\")).define(\"get_match_probability\", [\"prob_to_log2_bf\",\"log2_bf_to_prob\"], _get_match_probability);\n  main.variable(observer(\"get_match_probability_components\")).define(\"get_match_probability_components\", [\"prob_to_log2_bf\",\"log2_bf_to_prob\"], _get_match_probability_components);\n  main.variable(observer(\"get_m_u_formula_numbers\")).define(\"get_m_u_formula_numbers\", [\"get_match_probability_components\"], _get_m_u_formula_numbers);\n  main.variable(observer(\"get_m_u_formula_symbols\")).define(\"get_m_u_formula_symbols\", [\"get_match_probability_components\"], _get_m_u_formula_symbols);\n  main.variable(observer()).define([\"tex\",\"get_m_u_formula_symbols\",\"df_gammas\",\"splink_settings\"], _16);\n  main.variable(observer(\"get_comparison_vector_symbols_and_numbers\")).define(\"get_comparison_vector_symbols_and_numbers\", [\"get_match_probability_components\"], _get_comparison_vector_symbols_and_numbers);\n  main.variable(observer()).define([\"tex\",\"get_comparison_vector_symbols_and_numbers\",\"df_gammas\",\"splink_settings\"], _18);\n  main.variable(observer()).define([\"tex\"], _19);\n  main.variable(observer()).define([\"tex\",\"get_m_u_formula_numbers\",\"df_gammas\",\"splink_settings\"], _20);\n  main.variable(observer()).define([\"get_match_probability_components\",\"df_gammas\",\"splink_settings\"], _21);\n  main.variable(observer(\"get_df_comparison\")).define(\"get_df_comparison\", [\"aq\"], _get_df_comparison);\n  main.variable(observer(\"get_df_gammas\")).define(\"get_df_gammas\", [\"aq\"], _get_df_gammas);\n  main.variable(observer(\"bayes_factor_to_prob\")).define(\"bayes_factor_to_prob\", _bayes_factor_to_prob);\n  main.variable(observer(\"log2_bf_to_prob\")).define(\"log2_bf_to_prob\", [\"bayes_factor_to_prob\"], _log2_bf_to_prob);\n  main.variable(observer(\"prob_to_bayes_factor\")).define(\"prob_to_bayes_factor\", _prob_to_bayes_factor);\n  main.variable(observer(\"prob_to_log2_bf\")).define(\"prob_to_log2_bf\", [\"prob_to_bayes_factor\"], _prob_to_log2_bf);\n  const child1 = runtime.module(define1);\n  main.import(\"aq\", child1);\n  main.import(\"op\", child1);\n  main.variable(observer(\"first_name_lookup\")).define(\"first_name_lookup\", [\"d3\"], _first_name_lookup);\n  main.variable(observer(\"surname_lookup\")).define(\"surname_lookup\", [\"d3\"], _surname_lookup);\n  main.variable(observer(\"term_freqs\")).define(\"term_freqs\", [\"first_name_lookup\",\"surname_lookup\"], _term_freqs);\n  main.variable(observer()).define([\"term_freqs\"], _32);\n  main.variable(observer()).define([\"term_freqs\"], _33);\n  return main;\n}\n","function _1(md){return(\nmd`# Waterfall chart`\n)}\n\nfunction _2(md){return(\nmd`### Objective\n\nTake \n- a Splink settings object \n- A row of data from \\`df_e\\`\nAnd turn it into the data needed for the waterfall chart.\n\n`\n)}\n\nfunction _3(md){return(\nmd`## Example`\n)}\n\nfunction _splink_settings()\n{\n  return {\n    proportion_of_matches: 1 / 100,\n    comparison_columns: [\n      {\n        num_levels: 3,\n        col_name: \"first_name\",\n        u_probabilities: [0.8, 0.2],\n        m_probabilities: [0.2, 0.8]\n      },\n      {\n        num_levels: 3,\n        col_name: \"surname\",\n        u_probabilities: [0.8, 0.2],\n        m_probabilities: [0.2, 0.8]\n      },\n      {\n        col_name: \"date_of_birth\",\n        u_probabilities: [0.99, 0.01],\n        m_probabilities: [0.2, 0.8]\n      }\n    ]\n  };\n}\n\n\nfunction _row()\n{\n  return {\n    first_name_l: \"John\",\n    first_name_r: \"John\",\n    ùõæ_first_name: 1,\n    surname_l: \"Smith\",\n    surname_r: \"Smith\",\n    ùõæ_surname: 1,\n    date_of_birth_l: \"1992-04-01\",\n    date_of_birth_l: \"1992-04-02\",\n    ùõæ_date_of_birth: 0,\n    other: \"hi\"\n  };\n}\n\n\nfunction _overrides()\n{\n  return { height: 200 };\n}\n\n\nfunction _7(get_waterfall_chart,row,splink_settings,overrides){return(\nget_waterfall_chart(row, splink_settings, overrides, true)\n)}\n\nfunction _8(get_waterfall_chart,row,splink_settings,overrides){return(\nget_waterfall_chart(row, splink_settings, overrides, false)\n)}\n\nfunction _9(md){return(\nmd`## Code`\n)}\n\nfunction _get_waterfall_chart(get_waterfall_chart_data,embed,get_chart_spec){return(\nfunction (\n  row,\n  splink_settings,\n  chart_overrides,\n  simplified,\n  term_freqs = {}\n) {\n  let data = get_waterfall_chart_data(row, splink_settings, term_freqs);\n\n  return embed(get_chart_spec(data, chart_overrides, simplified));\n}\n)}\n\nfunction _get_comparison_column_lookup(){return(\nfunction get_comparison_column_lookup(splink_settings) {\n  let lookup = {};\n  splink_settings.comparison_columns.forEach((d) => {\n    let col_name = d[\"col_name\"];\n    lookup[col_name] = d;\n  });\n  return lookup;\n}\n)}\n\nfunction _get_waterfall_chart_data(get_waterfall_data_lambda_row,get_waterfall_data_other_rows,get_waterfall_data_final_row){return(\nfunction get_waterfall_chart_data(row, splink_settings, term_freqs = {}) {\n  \n  let lambda_row = get_waterfall_data_lambda_row(splink_settings);\n  let waterfall_data_other_rows = get_waterfall_data_other_rows(\n    row,\n    splink_settings,\n    term_freqs\n  );\n\n  let rows_except_final = [lambda_row].concat(waterfall_data_other_rows);\n  let final_row = get_waterfall_data_final_row(splink_settings);\n\n  let cumulative_log2_bayes_factor = rows_except_final.reduce(\n    (a, b) => a + b[\"log2_bayes_factor\"],\n    0\n  );\n\n  final_row[\"bayes_factor\"] = 2 ** cumulative_log2_bayes_factor;\n  final_row[\"log2_bayes_factor\"] = cumulative_log2_bayes_factor;\n\n  return rows_except_final.concat([final_row]);\n}\n)}\n\nfunction _get_waterfall_row_gamma(get_comparison_column_lookup,log2){return(\nfunction get_waterfall_row_gamma(gamma_key, row, splink_settings, term_freqs) {\n  let key = gamma_key;\n  let gamma_value = row[key];\n  let col_name = key.replace(\"ùõæ_\", \"\");\n  let cc_lookup = get_comparison_column_lookup(splink_settings);\n  let this_cc = cc_lookup[col_name];\n\n  let value_l = row[col_name + \"_l\"];\n  let value_r = row[col_name + \"_r\"];\n\n  let u_probability, m_probability;\n  if (gamma_value == -1) {\n    u_probability = 0.5;\n    m_probability = 0.5;\n  } else {\n    u_probability = this_cc[\"u_probabilities\"][gamma_value];\n    m_probability = this_cc[\"m_probabilities\"][gamma_value];\n\n    if (value_l == value_r) {\n      if (col_name in term_freqs) {\n        let tfs = term_freqs[col_name];\n        u_probability = tfs[value_l] || u_probability;\n      }\n    }\n  }\n\n  let bayes_factor = m_probability / u_probability;\n\n  return {\n    bayes_factor: bayes_factor,\n    column_name: col_name,\n    gamma_column_name: \"ùõæ_\" + col_name,\n    gamma_index: gamma_value,\n\n    level_name: \"level_\" + gamma_value,\n\n    log2_bayes_factor: log2(bayes_factor),\n    m_probability: m_probability,\n\n    num_levels: null,\n    u_probability: u_probability,\n    value_l: value_l,\n    value_r: value_r\n  };\n}\n)}\n\nfunction _get_waterfall_data_lambda_row(prob_to_bayes_factor,prob_to_log2_bayes_factor){return(\nfunction (splink_settings) {\n  let row = {\n    bayes_factor: prob_to_bayes_factor(splink_settings.proportion_of_matches),\n    column_name: \"Prior\",\n    gamma_column_name: \"\",\n    gamma_index: \"\",\n\n    level_name: null,\n\n    log2_bayes_factor: prob_to_log2_bayes_factor(\n      splink_settings.proportion_of_matches\n    ),\n    m_probability: null,\n\n    num_levels: null,\n    u_probability: null,\n    value_l: \"\",\n    value_r: \"\"\n  };\n\n  return row;\n}\n)}\n\nfunction _get_waterfall_data_other_rows(get_waterfall_row_gamma){return(\nfunction (row, splink_settings, term_freqs) {\n  let keys = Object.keys(row);\n  keys = keys.filter((key) => key.includes(\"ùõæ_\"));\n  return keys.map((gamma_key) =>\n    get_waterfall_row_gamma(gamma_key, row, splink_settings, term_freqs)\n  );\n}\n)}\n\nfunction _get_waterfall_data_final_row(){return(\nfunction (splink_settings) {\n  let row = {\n    bayes_factor: null,\n    column_name: \"Final score\",\n    gamma_column_name: \"\",\n    gamma_index: \"\",\n\n    level_name: null,\n\n    log2_bayes_factor: null,\n    m_probability: null,\n\n    num_levels: null,\n    u_probability: null,\n    value_l: \"\",\n    value_r: \"\"\n  };\n\n  return row;\n}\n)}\n\nfunction _get_chart_spec(base_spec){return(\nfunction (data, overrides, simplified = false) {\n  let base_spec_2 = JSON.parse(JSON.stringify(base_spec));\n  // let base_spec_2 = Object.assign({}, base_spec);\n  base_spec_2.data.values = data;\n  let spec = { ...base_spec_2, ...overrides };\n  if (simplified) {\n    // Remove right hand axis\n    spec[\"layer\"][1][\"encoding\"][\"y\"][\"axis\"] = false;\n\n    // Remove bayes factor text overlays\n    // spec[\"layer\"][0][\"layer\"].splice(2, 1);\n    spec[\"layer\"][0][\"layer\"][2][\"encoding\"][\"text\"] = {\n      type: \"nominal\",\n      field: \"up_down_emoji\"\n    };\n    spec[\"layer\"][0][\"layer\"][2][\"encoding\"][\"opacity\"] = {\n      condition: {\n        value: 0,\n        test:\n          \"datum.column_name == 'Final score' || datum.column_name == 'Prior'\"\n      }\n    };\n\n    // Make left hand side axis probability\n    let expr = \"format(1 / (1 + pow(2, -1*datum.value)), '.2r')\";\n    spec[\"layer\"][0][\"layer\"][1][\"encoding\"][\"y\"][\"axis\"][\"labelExpr\"] = expr;\n    spec[\"layer\"][0][\"layer\"][1][\"encoding\"][\"y\"][\"axis\"][\"title\"] =\n      \"probability\";\n\n    // Tooltip\n\n    spec[\"layer\"][0][\"layer\"][1][\"encoding\"][\"tooltip\"] = [\n      {\n        type: \"quantitative\",\n        field: \"prob\",\n        format: \".3r\",\n        title: \"Cumulative match probability\"\n      }\n    ];\n  }\n\n  return spec;\n}\n)}\n\nfunction _base_spec()\n{\n  return {\n    config: { view: { continuousHeight: 300, continuousWidth: 400 } },\n    title: {\n      text: \"Bayes factor intuition chart\",\n      subtitle:\n        \"How each comparison column contributes to the final match score\"\n    },\n    transform: [\n      { filter: \"(datum.bayes_factor !== 1.0)\" },\n      {\n        window: [\n          { op: \"sum\", field: \"log2_bayes_factor\", as: \"sum\" },\n          { op: \"lead\", field: \"column_name\", as: \"lead\" }\n        ],\n        frame: [null, 0]\n      },\n      {\n        calculate:\n          'datum.column_name === \"Final score\" ? datum.sum - datum.log2_bayes_factor : datum.sum',\n        as: \"sum\"\n      },\n      {\n        calculate: \"datum.lead === null ? datum.column_name : datum.lead\",\n        as: \"lead\"\n      },\n      {\n        calculate:\n          'datum.column_name === \"Final score\" || datum.column_name === \"Prior lambda\" ? 0 : datum.sum - datum.log2_bayes_factor',\n        as: \"previous_sum\"\n      },\n      {\n        calculate: 'datum.sum > datum.previous_sum ? datum.column_name : \"\"',\n        as: \"top_label\"\n      },\n      {\n        calculate: 'datum.sum < datum.previous_sum ? datum.column_name : \"\"',\n        as: \"bottom_label\"\n      },\n      {\n        calculate:\n          \"datum.sum > datum.previous_sum ? datum.sum : datum.previous_sum\",\n        as: \"sum_top\"\n      },\n      {\n        calculate:\n          \"datum.sum < datum.previous_sum ? datum.sum : datum.previous_sum\",\n        as: \"sum_bottom\"\n      },\n      { calculate: \"(datum.sum + datum.previous_sum) / 2\", as: \"center\" },\n      {\n        calculate:\n          '(datum.log2_bayes_factor > 0 ? \"+\" : \"\") + datum.log2_bayes_factor',\n        as: \"text_log2_bayes_factor\"\n      },\n      { calculate: \"datum.sum < datum.previous_sum ? 4 : -4\", as: \"dy\" },\n      {\n        calculate: 'datum.sum < datum.previous_sum ? \"top\" : \"bottom\"',\n        as: \"baseline\"\n      },\n      { calculate: \"1. / (1 + pow(2, -1.*datum.sum))\", as: \"prob\" },\n      { calculate: \"0*datum.sum\", as: \"zero\" },\n      {\n        calculate: 'datum.sum > datum.previous_sum ? \"‚Üë\" : \"‚Üì\"',\n        as: \"up_down_emoji\"\n      }\n    ],\n    layer: [\n      {\n        layer: [\n          {\n            mark: \"rule\",\n            encoding: {\n              y: { field: \"zero\", type: \"quantitative\" },\n              size: { value: 0.5 },\n              color: { value: \"black\" }\n            }\n          },\n          {\n            mark: { type: \"bar\", width: 60 },\n            encoding: {\n              color: {\n                condition: {\n                  value: \"red\",\n                  test: \"(datum.log2_bayes_factor < 0)\"\n                },\n                value: \"green\"\n              },\n              opacity: {\n                condition: {\n                  value: 1,\n                  test:\n                    \"datum.column_name == 'Prior' || datum.column_name == 'Final score'\"\n                },\n                value: 0.5\n              },\n              tooltip: [\n                {\n                  type: \"nominal\",\n                  field: \"column_name\",\n                  title: \"Comparison column\"\n                },\n                { type: \"nominal\", field: \"value_l\", title: \"Value (L)\" },\n                { type: \"nominal\", field: \"value_r\", title: \"Value (R)\" },\n                { type: \"nominal\", field: \"gamma_index\", title: \"Gamma level\" },\n\n                {\n                  type: \"quantitative\",\n                  field: \"bayes_factor\",\n                  format: \".3r\",\n                  title: \"Bayes factor\"\n                },\n                {\n                  type: \"quantitative\",\n                  field: \"log2_bayes_factor\",\n                  format: \".3r\",\n                  title: \"log2(Bayes factor)\"\n                },\n                {\n                  type: \"quantitative\",\n                  field: \"prob\",\n                  format: \".3r\",\n                  title: \"Cumulative match probability\"\n                }\n              ],\n              x: {\n                type: \"nominal\",\n                axis: {\n                  labelExpr:\n                    \"datum.value == 'Prior' || datum.value == 'Final score' ? '' : datum.value\",\n\n                  labelAlign: \"center\",\n                  labelPadding: 10,\n                  title: \"Column\",\n                  grid: true,\n                  tickBand: \"extent\"\n                },\n                field: \"column_name\",\n                sort: null\n              },\n              y: {\n                type: \"quantitative\",\n                axis: {\n                  grid: false,\n                  orient: \"left\",\n                  title: \"log2(Bayes factor)\"\n                },\n                field: \"previous_sum\"\n              },\n              y2: { field: \"sum\" }\n            }\n          },\n          {\n            mark: { type: \"text\", fontWeight: \"bold\" },\n            encoding: {\n              color: { value: \"white\" },\n              text: {\n                condition: {\n                  type: \"nominal\",\n                  field: \"log2_bayes_factor\",\n                  format: \".2f\",\n                  test: \"abs(datum.log2_bayes_factor) > 1\"\n                },\n                value: \"\"\n              },\n              x: {\n                type: \"nominal\",\n                axis: { labelAngle: 0, title: \"Column\" },\n                field: \"column_name\",\n                sort: null\n              },\n              y: {\n                type: \"quantitative\",\n                axis: { orient: \"left\" },\n                field: \"center\"\n              }\n            }\n          },\n          {\n            mark: {\n              type: \"text\",\n              baseline: \"bottom\",\n              dy: -5,\n              fontWeight: \"bold\"\n            },\n            encoding: {\n              color: { value: \"black\" },\n              text: {\n                condition: {\n                  type: \"nominal\",\n                  field: \"top_label\",\n                  test: \"abs(datum.log2_bayes_factor) > 1\"\n                },\n                value: \"\"\n              },\n              x: {\n                type: \"nominal\",\n                axis: { labelAngle: 0, title: \"Column\" },\n                field: \"column_name\",\n                sort: null\n              },\n              y: { type: \"quantitative\", field: \"sum_top\" }\n            }\n          },\n          {\n            mark: { type: \"text\", baseline: \"top\", dy: 5, fontWeight: \"bold\" },\n            encoding: {\n              color: { value: \"black\" },\n              text: {\n                condition: {\n                  type: \"nominal\",\n                  field: \"bottom_label\",\n                  test: \"abs(datum.log2_bayes_factor) > 1\"\n                },\n                value: \"\"\n              },\n              x: {\n                type: \"nominal\",\n                axis: { labelAngle: 0, title: \"Column\" },\n                field: \"column_name\",\n                sort: null\n              },\n              y: { type: \"quantitative\", field: \"sum_bottom\" }\n            }\n          }\n        ]\n      },\n      {\n        mark: {\n          type: \"rule\",\n          color: \"black\",\n          strokeWidth: 2,\n          x2Offset: 30,\n          xOffset: -30\n        },\n        encoding: {\n          x: {\n            type: \"nominal\",\n            axis: { labelAngle: 0, title: \"Column\" },\n            field: \"column_name\",\n            sort: null\n          },\n          x2: { field: \"lead\" },\n          y: {\n            type: \"quantitative\",\n            axis: {\n              labelExpr: \"format(1 / (1 + pow(2, -1*datum.value)), '.2r')\",\n              orient: \"right\",\n              title: \"Probability\"\n            },\n            field: \"sum\",\n            scale: { zero: false }\n          }\n        }\n      }\n    ],\n    height: 450,\n    resolve: { axis: { y: \"independent\" } },\n    width: { step: 75 },\n    $schema: \"https://vega.github.io/schema/vega-lite/v4.8.1.json\",\n    data: { values: null }\n  };\n}\n\n\nfunction _embed(require){return(\nrequire(\"vega-embed@6\")\n)}\n\nfunction _bayes_factor_to_prob(){return(\nfunction bayes_factor_to_prob(b) {\n  return b / (b + 1);\n}\n)}\n\nfunction _log2(){return(\nMath.log2\n)}\n\nfunction _prob_to_bayes_factor(){return(\nfunction prob_to_bayes_factor(p) {\n  return p / (1 - p);\n}\n)}\n\nfunction _prob_to_log2_bayes_factor(log2,prob_to_bayes_factor){return(\nfunction prob_to_log2_bayes_factor(p) {\n  return log2(prob_to_bayes_factor(p));\n}\n)}\n\nfunction _log2_bayes_factor_to_prob(bayes_factor_to_prob){return(\nfunction log2_bayes_factor_to_prob(log2_b) {\n  return bayes_factor_to_prob(2 ** log2_b);\n}\n)}\n\nfunction _first_name_lookup(d3)\n{\n  return d3\n    .csv(\n      \"https://gist.githubusercontent.com/RobinL/0ee2e59db8cbecc105942fe4b101e847/raw/110e5bb3b574b7584b5452d4accfcfad71f2b19d/first_name_noyear.csv\",\n      d3.autoType\n    )\n    .then((csv_file) => {\n      let lookup = {};\n      csv_file.forEach((row) => {\n        lookup[row.firstname] = row.freq;\n      });\n      return lookup;\n    });\n}\n\n\nfunction _term_freqs(first_name_lookup)\n{\n  return {\n    first_name: first_name_lookup\n  };\n}\n\n\nexport default function define(runtime, observer) {\n  const main = runtime.module();\n  main.variable(observer()).define([\"md\"], _1);\n  main.variable(observer()).define([\"md\"], _2);\n  main.variable(observer()).define([\"md\"], _3);\n  main.variable(observer(\"splink_settings\")).define(\"splink_settings\", _splink_settings);\n  main.variable(observer(\"row\")).define(\"row\", _row);\n  main.variable(observer(\"overrides\")).define(\"overrides\", _overrides);\n  main.variable(observer()).define([\"get_waterfall_chart\",\"row\",\"splink_settings\",\"overrides\"], _7);\n  main.variable(observer()).define([\"get_waterfall_chart\",\"row\",\"splink_settings\",\"overrides\"], _8);\n  main.variable(observer()).define([\"md\"], _9);\n  main.variable(observer(\"get_waterfall_chart\")).define(\"get_waterfall_chart\", [\"get_waterfall_chart_data\",\"embed\",\"get_chart_spec\"], _get_waterfall_chart);\n  main.variable(observer(\"get_comparison_column_lookup\")).define(\"get_comparison_column_lookup\", _get_comparison_column_lookup);\n  main.variable(observer(\"get_waterfall_chart_data\")).define(\"get_waterfall_chart_data\", [\"get_waterfall_data_lambda_row\",\"get_waterfall_data_other_rows\",\"get_waterfall_data_final_row\"], _get_waterfall_chart_data);\n  main.variable(observer(\"get_waterfall_row_gamma\")).define(\"get_waterfall_row_gamma\", [\"get_comparison_column_lookup\",\"log2\"], _get_waterfall_row_gamma);\n  main.variable(observer(\"get_waterfall_data_lambda_row\")).define(\"get_waterfall_data_lambda_row\", [\"prob_to_bayes_factor\",\"prob_to_log2_bayes_factor\"], _get_waterfall_data_lambda_row);\n  main.variable(observer(\"get_waterfall_data_other_rows\")).define(\"get_waterfall_data_other_rows\", [\"get_waterfall_row_gamma\"], _get_waterfall_data_other_rows);\n  main.variable(observer(\"get_waterfall_data_final_row\")).define(\"get_waterfall_data_final_row\", _get_waterfall_data_final_row);\n  main.variable(observer(\"get_chart_spec\")).define(\"get_chart_spec\", [\"base_spec\"], _get_chart_spec);\n  main.variable(observer(\"base_spec\")).define(\"base_spec\", _base_spec);\n  main.variable(observer(\"embed\")).define(\"embed\", [\"require\"], _embed);\n  main.variable(observer(\"bayes_factor_to_prob\")).define(\"bayes_factor_to_prob\", _bayes_factor_to_prob);\n  main.variable(observer(\"log2\")).define(\"log2\", _log2);\n  main.variable(observer(\"prob_to_bayes_factor\")).define(\"prob_to_bayes_factor\", _prob_to_bayes_factor);\n  main.variable(observer(\"prob_to_log2_bayes_factor\")).define(\"prob_to_log2_bayes_factor\", [\"log2\",\"prob_to_bayes_factor\"], _prob_to_log2_bayes_factor);\n  main.variable(observer(\"log2_bayes_factor_to_prob\")).define(\"log2_bayes_factor_to_prob\", [\"bayes_factor_to_prob\"], _log2_bayes_factor_to_prob);\n  main.variable(observer(\"first_name_lookup\")).define(\"first_name_lookup\", [\"d3\"], _first_name_lookup);\n  main.variable(observer(\"term_freqs\")).define(\"term_freqs\", [\"first_name_lookup\"], _term_freqs);\n  return main;\n}\n","import define1 from \"./d25176b0fe784ad0@488.js\";\nimport define2 from \"./843cb6e82d7c3d9b@474.js\";\n\nfunction _title(md){return(\nmd`# An Interactive Introduction to Probabilistic Record Linkage`\n)}\n\nfunction _2(md){return(\nmd`*A final version of this notebook can be viewed on my blog [here](https://www.robinlinacre.com/intro_to_probabilistic_linkage/).*`\n)}\n\nfunction _para_1(md){return(\nmd`Probablistic record linkage is a technique used to link together records that lack unique identifiers.  \n\nIn the absence of a unique identifier such as a National Insurance number, we can use a combination of individually non-unique variables such as name, gender and date of birth to identify individuals.\n\nRecord linkage can be done within datasets (deduplication) or between datasets (linkage), or both.\n`\n)}\n\nfunction _para_2(md){return(\nmd`Linkage is probabilistic in the sense that it relies on the balance on evidence.  In a large dataset, observing that two records match on the full name 'John Smith' provides some evidence that these two records may refer to the same person, but this evidence is inconclusive.  \n\nMore broadly, it is often impossible to classify pairs of records as matches or non-matches beyond any doubt.  Instead, the aim of probabilisitic record linkage to to quantify the probability that a pair of records refer to the same entity by considering evidence in favour and against a match and weighting it appropriately.\n`\n)}\n\nfunction _para_3(md){return(\nmd`In probabilistic record linkage, we start with a prior, which represents the probability that two records drawn at random are a match.  We then compare the two records, increasing the match probability where columns agree, and decreasing it when columns disagree.  \n\n`\n)}\n\nfunction _para_4(md){return(\nmd`The most common type of probabilistic record linkage model is called the Fellegi-Sunter model. \n\nLet's take a look at at an example of a trained Fellegi-Sunter model to calculate match probability interactively.  This model will compare the two records in the table, and assess whether they refer to the same person, or different people.`\n)}\n\nfunction _para_5(md){return(\nmd`\n‚ú®<span style=\"background-color:yellow\">You can edit the records in the table, and the match probability will be estimated.</span>‚ú®`\n)}\n\nfunction _table(html){return(\nhtml`\n<table id=\"data-table\" >\n\n<tr>\n\n<th>First name</th>\n<th>Middle name</th>\n<th>Surname</th>\n<th>DOB</th>\n<th>Postcode</th>\n\n</tr>\n<tr contenteditable>\n\n<td>Mary</td>\n<td>Emma</td>\n<td>Smith</td>\n<td>1990-05-09</td>\n<td>SW1A 1AA</td>\n\n</tr>\n<tr contenteditable>\n\n<td>Mary</td>\n<td>Emma</td>\n<td>Smith</td>\n<td>1990-05-09</td>\n<td>SW1A 1AA</td>\n</tr>\n\n</table>\n`\n)}\n\nfunction _estimated_probability(html,match_prob){return(\nhtml`<h3 style=\"font-family:Helvetica,Arial,Sans-Serif\">Estimated match probability = <span style=\"background-color:yellow\">${match_prob}%</h3>`\n)}\n\nfunction _para_6(md){return(\nmd`We can represent the model graphically using a waterfall chart, which is read left to right.  We start with the prior, and take each column into account in turn, with different match weights being applied to each column.  You can hover over the bars to see how the probability changes as each subsequent field is taken into account.\n\n`\n)}\n\nfunction _show_complex(inputs){return(\ninputs.toggle({\n  label: \"Show details in waterfall chart\"\n})\n)}\n\nfunction _waterfall_chart(get_waterfall_chart,df_gammas,splink_settings,overrides,show_complex,term_freqs){return(\nget_waterfall_chart(\n  df_gammas.objects()[0],\n  splink_settings,\n  overrides,\n  !show_complex,\n  term_freqs\n)\n)}\n\nfunction _para_7(md){return(\nmd`Columns with higher number of distinct values, such as date of birth, tend to represent stronger evidence in favour of a match since it's less likely that two records chosen at random would match by coincidence.  \n\nWhere a column does not match, this is usually evidence against a match.  However, the evidence may not be strong - for example, people move house, which could cause a mismatch on the 'postcode' column.\n\nThis, in a nutshell, is how probabilistic record linkage works.  By comparing records and weighting evidence appropriately, we estimate the probability of a match.`\n)}\n\nfunction _structure(md){return(\nmd`## Structure of this training material`\n)}\n\nfunction _para_8(md){return(\nmd` The rest of this training material explores the theory and practice of building probabilistic linkage models, focussing on the Fellegi-Sunter model. The sections are as follows:\n\n1. [The mathematics of the Fellegi-Sunter model](https://www.robinlinacre.com/maths_of_fellegi_sunter/)\n2. [Visualising the Fellegi Sunter model](https://www.robinlinacre.com/visualising_fellegi_sunter/)\n3. [The intuition behind match weights](https://www.robinlinacre.com/understanding_match_weights/)\n\nThese materials align closely to the probabilisic model used by [Splink](https://github.com/moj-analytical-services/splink), a piece of open source software for record linkage at scale.\n\n`\n)}\n\nfunction _match_prob(get_match_probability,df_gammas,splink_settings,term_freqs)\n{\n  let prob = get_match_probability(\n    df_gammas.objects()[0],\n    splink_settings,\n    term_freqs\n  );\n  return (prob * 100).toPrecision(4);\n}\n\n\nfunction _tableData(Generators,parseTableData,table){return(\nGenerators.observe((notify) => {\n  const keyinput = (event) => notify(parseTableData(table));\n  table.addEventListener(\"input\", keyinput, false);\n  notify(parseTableData(table));\n  return () => window.removeEventListener(\"input\", keyinput);\n})\n)}\n\nfunction _parseTableData(){return(\nfunction parseTableData(table) {\n  const data = [];\n\n  table.querySelectorAll(\"tr\").forEach((row, i) => {\n    let cells = row.cells;\n    let row_data = [];\n\n    for (let cell of cells) {\n      let value = cell.innerText;\n      value = value.trim();\n      value = value.toLowerCase();\n      if (value == \"\") {\n        value = null;\n      }\n      row_data.push(value);\n    }\n    data.push(row_data);\n  });\n\n  const formattedData = data.reduce((accumulator, row, i) => {\n    if (i == 0) {\n      accumulator.properties = row;\n    } else {\n      const rowObject = {};\n      rowObject[\"uid\"] = i;\n      accumulator.properties.forEach((key, i) => {\n        rowObject[key] = row[i];\n      });\n      accumulator.push(rowObject);\n    }\n    return accumulator;\n  }, []);\n  return formattedData;\n}\n)}\n\nfunction _df_e(get_df_e,df_gammas,splink_settings){return(\nget_df_e(df_gammas, splink_settings)\n)}\n\nfunction _df_gammas(get_df_gammas,df_comparison,splink_settings){return(\nget_df_gammas(df_comparison, splink_settings)\n)}\n\nfunction _df_comparison(get_df_comparison,records_l,records_r){return(\nget_df_comparison(records_l, records_r)\n)}\n\nfunction _records_l(rename_dict_keys,tableData)\n{\n  return [rename_dict_keys(tableData[0])];\n}\n\n\nfunction _records_r(rename_dict_keys,tableData)\n{\n  return [rename_dict_keys(tableData[1])];\n}\n\n\nfunction _rename_dict_keys(){return(\nfunction rename_dict_keys(d) {\n  return {\n    uid: d[\"uid\"],\n    fname: d[\"first name\"],\n    mname: d[\"middle name\"],\n    sname: d[\"surname\"],\n    dob: d[\"dob\"],\n    pc: d[\"postcode\"]\n  };\n}\n)}\n\nfunction _fname_case_stmt(dm_intersect,distance){return(\nfunction (row) {\n  if (row.fname_l === null || row.fname_r === null) {\n    return -1;\n  }\n  if (row.fname_l == row.fname_r) {\n    return 3;\n  }\n  if (dm_intersect(row.fname_l, row.fname_r)) {\n    return 2;\n  }\n  if (distance(row.fname_l, row.fname_r) > 0.85) {\n    return 1;\n  } else {\n    return 0;\n  }\n}\n)}\n\nfunction _mname_case_stmt(dm_intersect,distance){return(\nfunction (row) {\n  if (row.mname_l === null || row.mname_r === null) {\n    return -1;\n  }\n  if (row.mname_l == row.mname_r) {\n    return 3;\n  }\n  if (dm_intersect(row.mname_l, row.mname_r)) {\n    return 2;\n  }\n  if (distance(row.mname_l, row.mname_r) > 0.85) {\n    return 1;\n  } else {\n    return 0;\n  }\n}\n)}\n\nfunction _sname_case_stmt(dm_intersect,distance){return(\nfunction (row) {\n  if (row.sname_l === null || row.sname_r === null) {\n    return -1;\n  }\n  if (row.sname_l == row.sname_r) {\n    return 3;\n  }\n  if (dm_intersect(row.sname_l, row.sname_r)) {\n    return 2;\n  }\n  if (distance(row.sname_l, row.sname_r) > 0.85) {\n    return 1;\n  } else {\n    return 0;\n  }\n}\n)}\n\nfunction _abs_date_diff_in_years(){return(\nfunction (date_l, date_r) {\n  let d_l = new Date(date_l);\n  let d_r = new Date(date_r);\n  let divisor = 24 * 60 * 60 * 1000 * 365;\n  return Math.abs(d_l - d_r) / divisor;\n}\n)}\n\nfunction _dob_case_stmt(levenshtein,abs_date_diff_in_years){return(\nfunction (row) {\n  if (row.dob_l === null || row.dob_r === null) {\n    return -1;\n  }\n  if (row.dob_l == row.dob_r && row.dob_l.slice(-5) == \"01-01\") {\n    return 4;\n  }\n  if (row.dob_l == row.dob_r) {\n    return 5;\n  }\n  if (levenshtein(row.dob_l, row.dob_r) <= 1) {\n    return 3;\n  }\n  if (abs_date_diff_in_years(row.dob_l, row.dob_r) < 1) {\n    return 2;\n  }\n  if (abs_date_diff_in_years(row.dob_l, row.dob_r) < 10) {\n    return 1;\n  } else {\n    return 0;\n  }\n}\n)}\n\nfunction _pc_case_stmt(){return(\nfunction (row) {\n  if (row.pc_l === null || row.pc_r === null) {\n    return -1;\n  }\n  if (row.pc_l == row.pc_r) {\n    return 5;\n  }\n  if (row.pc_l.slice(0, 3) == row.pc_r.slice(0, 3)) {\n    return 4;\n  } else {\n    return 0;\n  }\n}\n)}\n\nfunction _splink_settings(fname_case_stmt,mname_case_stmt,sname_case_stmt,dob_case_stmt,pc_case_stmt)\n{\n  return {\n    proportion_of_matches: 1 / 60e6,\n    comparison_columns: [\n      {\n        num_levels: 4,\n        col_name: \"fname\",\n        u_probabilities: [\n          0.9883897757902356,\n          0.004639565877697178,\n          0.002783859108435161,\n          0.004186799223632191\n        ],\n        m_probabilities: [\n          0.013910835049471115,\n          0.03580070792581899,\n          0.0026304325373041827,\n          0.9431284756772805\n        ],\n        case_expression: fname_case_stmt\n      },\n      {\n        num_levels: 4,\n        col_name: \"mname\",\n        u_probabilities: [\n          0.9883897757902356,\n          0.004639565877697178,\n          0.002783859108435161,\n          0.004186799223632191\n        ],\n        m_probabilities: [\n          0.013910835049471115,\n          0.03580070792581899,\n          0.0026304325373041827,\n          0.9431284756772805\n        ],\n        case_expression: mname_case_stmt\n      },\n      {\n        num_levels: 4,\n        col_name: \"sname\",\n        u_probabilities: [\n          0.9971958658858057,\n          0.0015765242689686637,\n          0.0003754879678726784,\n          0.0008521218773530913\n        ],\n        m_probabilities: [\n          0.01809857679375992,\n          0.02769695651313621,\n          0.0014468181425986496,\n          0.9514336326024172\n        ],\n        case_expression: sname_case_stmt\n      },\n      {\n        col_name: \"dob\",\n        u_probabilities: [\n          0.2807916467157474,\n          0.20073737664045227,\n          0.5164828418823143,\n          0.0019211842885877536,\n          9.766061108210657e-7,\n          6.597386678746452e-5\n        ],\n        m_probabilities: [\n          0.00024675771766021674,\n          0.0017179728285089994,\n          0.009868620663422667,\n          0.023118927215599792,\n          0.0036827860949234354,\n          0.9571689718277999\n        ],\n        case_expression: dob_case_stmt\n      },\n      {\n        col_name: \"pc\",\n        u_probabilities: [\n          0.6751190264364737,\n          0.22792766449447727,\n          0.09517523421356786,\n          1.7091033037790942e-6,\n          0.0017755009047047013,\n          8.648474727307328e-7\n        ],\n        m_probabilities: [\n          0.18962646163517627,\n          0.02145498887358967,\n          0.4023991769621992,\n          0.11064711462002584,\n          0.07144100324386156,\n          0.20090472079462598\n        ],\n        case_expression: pc_case_stmt\n      }\n    ]\n  };\n}\n\n\nfunction _overrides()\n{\n  return {\n    title: {\n      text:\n        \"Match weights and their cumulative contribution to match probability\",\n      subtitle: \"\"\n    },\n    height: 200\n  };\n}\n\n\nfunction _dm(require){return(\nrequire(\"https://bundle.run/double-metaphone@2.0.0\")\n)}\n\nfunction _distance(require){return(\nrequire(\"jaro-winkler@0.2.8/index.js\")\n)}\n\nfunction _dm_intersect(dm){return(\nfunction dm_intersect(val_l, val_r) {\n  let arr_l = dm.doubleMetaphone(val_l);\n  let arr_r = dm.doubleMetaphone(val_r);\n  return arr_l.filter((value) => arr_r.includes(value)).length > 0;\n}\n)}\n\nfunction _first_name_lookup(d3)\n{\n  return d3\n    .csv(\n      \"https://gist.githubusercontent.com/RobinL/66df3f5d7dbea3d1add1a8e6067c7624/raw/d4d642e631563418e7b7889496c7a9149f259447/firstname_noyear_count2.csv\",\n      d3.autoType\n    )\n    .then(csv_file => {\n      let lookup = {};\n      csv_file.forEach(row => {\n        lookup[row.firstname] = row.freq;\n      });\n      return lookup;\n    });\n}\n\n\nfunction _surname_lookup(d3)\n{\n  return d3\n    .csv(\n      \"https://gist.githubusercontent.com/RobinL/3fe7f712ff93393fe0a28cbb1b8c3e46/raw/a87f572e194122dde4743dd905c1ce6c22fd33db/surname_noyear_count2.csv\",\n      d3.autoType\n    )\n    .then(csv_file => {\n      let lookup = {};\n      csv_file.forEach(row => {\n        lookup[row.surname] = row.freq;\n      });\n      return lookup;\n    });\n}\n\n\nfunction _term_freqs(first_name_lookup,surname_lookup)\n{\n  return {\n    fname: first_name_lookup,\n    mname: first_name_lookup,\n    sname: surname_lookup\n  };\n}\n\n\nfunction _levenshtein(){return(\nfunction (a, b) {\n  if (a.length == 0) return b.length;\n  if (b.length == 0) return a.length;\n\n  var matrix = [];\n\n  // increment along the first column of each row\n  var i;\n  for (i = 0; i <= b.length; i++) {\n    matrix[i] = [i];\n  }\n\n  // increment each column in the first row\n  var j;\n  for (j = 0; j <= a.length; j++) {\n    matrix[0][j] = j;\n  }\n\n  // Fill in the rest of the matrix\n  for (i = 1; i <= b.length; i++) {\n    for (j = 1; j <= a.length; j++) {\n      if (b.charAt(i - 1) == a.charAt(j - 1)) {\n        matrix[i][j] = matrix[i - 1][j - 1];\n      } else {\n        matrix[i][j] = Math.min(\n          matrix[i - 1][j - 1] + 1, // substitution\n          Math.min(\n            matrix[i][j - 1] + 1, // insertion\n            matrix[i - 1][j] + 1\n          )\n        ); // deletion\n      }\n    }\n  }\n\n  return matrix[b.length][a.length];\n}\n)}\n\nfunction _d3(require){return(\nrequire(\"d3@6\")\n)}\n\nfunction _inputs(require){return(\nrequire(\"@observablehq/inputs\")\n)}\n\nexport default function define(runtime, observer) {\n  const main = runtime.module();\n  main.variable(observer(\"title\")).define(\"title\", [\"md\"], _title);\n  main.variable(observer()).define([\"md\"], _2);\n  main.variable(observer(\"para_1\")).define(\"para_1\", [\"md\"], _para_1);\n  main.variable(observer(\"para_2\")).define(\"para_2\", [\"md\"], _para_2);\n  main.variable(observer(\"para_3\")).define(\"para_3\", [\"md\"], _para_3);\n  main.variable(observer(\"para_4\")).define(\"para_4\", [\"md\"], _para_4);\n  main.variable(observer(\"para_5\")).define(\"para_5\", [\"md\"], _para_5);\n  main.variable(observer(\"table\")).define(\"table\", [\"html\"], _table);\n  main.variable(observer(\"estimated_probability\")).define(\"estimated_probability\", [\"html\",\"match_prob\"], _estimated_probability);\n  main.variable(observer(\"para_6\")).define(\"para_6\", [\"md\"], _para_6);\n  main.variable(observer(\"viewof show_complex\")).define(\"viewof show_complex\", [\"inputs\"], _show_complex);\n  main.variable(observer(\"show_complex\")).define(\"show_complex\", [\"Generators\", \"viewof show_complex\"], (G, _) => G.input(_));\n  main.variable(observer(\"waterfall_chart\")).define(\"waterfall_chart\", [\"get_waterfall_chart\",\"df_gammas\",\"splink_settings\",\"overrides\",\"show_complex\",\"term_freqs\"], _waterfall_chart);\n  main.variable(observer(\"para_7\")).define(\"para_7\", [\"md\"], _para_7);\n  main.variable(observer(\"structure\")).define(\"structure\", [\"md\"], _structure);\n  main.variable(observer(\"para_8\")).define(\"para_8\", [\"md\"], _para_8);\n  main.variable(observer(\"match_prob\")).define(\"match_prob\", [\"get_match_probability\",\"df_gammas\",\"splink_settings\",\"term_freqs\"], _match_prob);\n  main.variable(observer(\"tableData\")).define(\"tableData\", [\"Generators\",\"parseTableData\",\"table\"], _tableData);\n  main.variable(observer(\"parseTableData\")).define(\"parseTableData\", _parseTableData);\n  const child1 = runtime.module(define1);\n  main.import(\"get_df_gammas\", child1);\n  main.import(\"get_df_e\", child1);\n  main.import(\"get_df_comparison\", child1);\n  main.import(\"get_match_probability\", child1);\n  main.variable(observer(\"df_e\")).define(\"df_e\", [\"get_df_e\",\"df_gammas\",\"splink_settings\"], _df_e);\n  main.variable(observer(\"df_gammas\")).define(\"df_gammas\", [\"get_df_gammas\",\"df_comparison\",\"splink_settings\"], _df_gammas);\n  main.variable(observer(\"df_comparison\")).define(\"df_comparison\", [\"get_df_comparison\",\"records_l\",\"records_r\"], _df_comparison);\n  main.variable(observer(\"records_l\")).define(\"records_l\", [\"rename_dict_keys\",\"tableData\"], _records_l);\n  main.variable(observer(\"records_r\")).define(\"records_r\", [\"rename_dict_keys\",\"tableData\"], _records_r);\n  main.variable(observer(\"rename_dict_keys\")).define(\"rename_dict_keys\", _rename_dict_keys);\n  main.variable(observer(\"fname_case_stmt\")).define(\"fname_case_stmt\", [\"dm_intersect\",\"distance\"], _fname_case_stmt);\n  main.variable(observer(\"mname_case_stmt\")).define(\"mname_case_stmt\", [\"dm_intersect\",\"distance\"], _mname_case_stmt);\n  main.variable(observer(\"sname_case_stmt\")).define(\"sname_case_stmt\", [\"dm_intersect\",\"distance\"], _sname_case_stmt);\n  main.variable(observer(\"abs_date_diff_in_years\")).define(\"abs_date_diff_in_years\", _abs_date_diff_in_years);\n  main.variable(observer(\"dob_case_stmt\")).define(\"dob_case_stmt\", [\"levenshtein\",\"abs_date_diff_in_years\"], _dob_case_stmt);\n  main.variable(observer(\"pc_case_stmt\")).define(\"pc_case_stmt\", _pc_case_stmt);\n  main.variable(observer(\"splink_settings\")).define(\"splink_settings\", [\"fname_case_stmt\",\"mname_case_stmt\",\"sname_case_stmt\",\"dob_case_stmt\",\"pc_case_stmt\"], _splink_settings);\n  main.variable(observer(\"overrides\")).define(\"overrides\", _overrides);\n  const child2 = runtime.module(define2);\n  main.import(\"get_waterfall_chart\", child2);\n  main.variable(observer(\"dm\")).define(\"dm\", [\"require\"], _dm);\n  main.variable(observer(\"distance\")).define(\"distance\", [\"require\"], _distance);\n  main.variable(observer(\"dm_intersect\")).define(\"dm_intersect\", [\"dm\"], _dm_intersect);\n  main.variable(observer(\"first_name_lookup\")).define(\"first_name_lookup\", [\"d3\"], _first_name_lookup);\n  main.variable(observer(\"surname_lookup\")).define(\"surname_lookup\", [\"d3\"], _surname_lookup);\n  main.variable(observer(\"term_freqs\")).define(\"term_freqs\", [\"first_name_lookup\",\"surname_lookup\"], _term_freqs);\n  main.variable(observer(\"levenshtein\")).define(\"levenshtein\", _levenshtein);\n  main.variable(observer(\"d3\")).define(\"d3\", [\"require\"], _d3);\n  main.variable(observer(\"inputs\")).define(\"inputs\", [\"require\"], _inputs);\n  return main;\n}\n","/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport React from \"react\";\nimport {MDXLayout} from \"../components/MDXLayout\";\nimport {SEO} from \"../components/SEO\";\nexport const Head = props => React.createElement(SEO, {\n  frontmatter: props.pageContext.frontmatter\n});\nimport notebook from '@robinl/d51533bbe054b3d8';\nimport ObservableNotebook from '../components/ObservableNotebook';\nimport TutorialNav from '../components/TutorialNav';\nimport CompactTutorialNav from '../components/CompactTutorialNav';\nexport const output_order = [\"title\", \"para_1\", \"para_2\", \"para_3\", \"para_4\", \"para_5\", \"table\", \"estimated_probability\", \"para_6\", \"viewof show_complex\", \"waterfall_chart\", \"para_7\", \"structure\", \"para_8\"];\nfunction _createMdxContent(props) {\n  return React.createElement(React.Fragment, null, React.createElement(CompactTutorialNav, {\n    frontmatter: props.pageContext.frontmatter\n  }), \"\\n\", React.createElement(ObservableNotebook, {\n    notebook: notebook,\n    cells: output_order\n  }), \"\\n\", React.createElement(TutorialNav, {\n    frontmatter: props.pageContext.frontmatter\n  }));\n}\nfunction MDXContent(props = {}) {\n  return React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props));\n}\nexport default MDXContent;\n","import React from 'react';\nimport { Link, useStaticQuery, graphql } from 'gatsby';\n\nconst CompactTutorialNav = ({ frontmatter }) => {\n    const { tutorial_number } = frontmatter;\n\n    const data = useStaticQuery(graphql`\n        query {\n            allMdx(filter: { frontmatter: { tutorial_number: { ne: null } } }) {\n                edges {\n                    node {\n                        frontmatter {\n                            tutorial_number\n                        }\n                        fields {\n                            slug\n                        }\n                    }\n                }\n            }\n        }\n    `);\n\n    const tutorials = data.allMdx.edges.map(\n        edge => edge.node.frontmatter.tutorial_number\n    );\n    const prevExists = tutorials.includes(tutorial_number - 1);\n    const nextExists = tutorials.includes(tutorial_number + 1);\n\n    const prevSlug = data.allMdx.edges.find(\n        edge => edge.node.frontmatter.tutorial_number === tutorial_number - 1\n    )?.node?.fields?.slug;\n    const nextSlug = data.allMdx.edges.find(\n        edge => edge.node.frontmatter.tutorial_number === tutorial_number + 1\n    )?.node?.fields?.slug;\n\n    return (\n        <div className=\"bg-gray-100 p-2 mt-2 mb-2 italic rounded-md text-gray-600 text-xs\">\n            <div className=\"flex justify-between\">\n                <div className=\"w-1/3 text-left\">\n                    {prevExists && (\n                        <Link\n                            to={prevSlug}\n                            className=\"text-blue-500 hover:underline\"\n                        >\n                            &larr; Previous article\n                        </Link>\n                    )}\n                </div>\n                <div className=\"w-1/3 text-center\">\n                    <span>This is part {tutorial_number} of the tutorial</span>\n                </div>\n                <div className=\"w-1/3 text-right\">\n                    {nextExists && (\n                        <Link\n                            to={nextSlug}\n                            className=\"text-blue-500 hover:underline\"\n                        >\n                            Next article &rarr;\n                        </Link>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default CompactTutorialNav;\n","import React, { useRef, useEffect } from 'react';\nimport { Runtime, Inspector, Library } from '@observablehq/runtime';\n\nconst mountId = 'mdx-container-div';\n\nconst stdlib = new Library();\n\nconst library = Object.assign({}, stdlib, { width: width_mdx });\n\nfunction width_mdx() {\n    return stdlib.Generators.observe(notify => {\n        let width1 = notify(document.getElementById(mountId).clientWidth);\n        function resized() {\n            let width2 = document.getElementById(mountId).clientWidth;\n            if (width2 !== width1) notify((width1 = width2));\n        }\n\n        window.addEventListener('resize', resized);\n        return () => window.removeEventListener('resize', resized);\n    });\n}\n\nfunction ObservableNotebook({ notebook, cells, customClassName }) {\n    const refs = useRef(cells.map(() => React.createRef()));\n\n    useEffect(() => {\n        const runtime = new Runtime(library);\n        runtime.module(notebook, name => {\n            const index = cells.indexOf(name);\n            if (index !== -1) {\n                return new Inspector(refs.current[index].current);\n            }\n        });\n        return () => runtime.dispose();\n    }, [notebook, cells]);\n\n    return (\n        <div className={customClassName}>\n            {refs.current.map((ref, index) => (\n                <div key={index} ref={ref} />\n            ))}\n        </div>\n    );\n}\n\nexport default ObservableNotebook;\n","import { graphql, useStaticQuery } from 'gatsby';\n\nexport const useSiteMetadata = () => {\n    const data = useStaticQuery(graphql`\n        query {\n            site {\n                siteMetadata {\n                    title\n                    description\n                    twitterUsername\n                    image\n                    siteUrl\n                }\n            }\n        }\n    `);\n\n    return data.site.siteMetadata;\n};\n","import React from 'react';\nimport { useSiteMetadata } from '../hooks/use-site-metadata';\n\nexport const SEO = ({ frontmatter }) => {\n    const {\n        title: defaultTitle,\n        description: defaultDescription,\n        image,\n        siteUrl,\n        twitterUsername,\n    } = useSiteMetadata();\n\n    const seo = {\n        title: frontmatter?.title || defaultTitle,\n        description: frontmatter?.description || defaultDescription,\n        image: `${siteUrl}${frontmatter?.image || image}`,\n        url: `${siteUrl}${frontmatter?.pathname || ``}`,\n        twitterUsername,\n        ...frontmatter,\n    };\n\n    return (\n        <>\n            <title>{seo.title}</title>\n            <meta name=\"description\" content={seo.description} />\n            <meta name=\"image\" content={seo.image} />\n        </>\n    );\n};\n","import React from 'react';\nimport { Link, useStaticQuery, graphql } from 'gatsby';\n\nconst TutorialNav = ({ frontmatter }) => {\n    const { tutorial_number, title } = frontmatter;\n\n    const data = useStaticQuery(graphql`\n        query {\n            allMdx(filter: { frontmatter: { tutorial_number: { ne: null } } }) {\n                edges {\n                    node {\n                        frontmatter {\n                            tutorial_number\n                            title\n                        }\n                        fields {\n                            slug\n                        }\n                    }\n                }\n            }\n        }\n    `);\n\n    const sortedTutorials = data.allMdx.edges.sort(\n        (a, b) =>\n            a.node.frontmatter.tutorial_number -\n            b.node.frontmatter.tutorial_number\n    );\n\n    return (\n        <div className=\"bg-blue-100  p-4 mt-8  mb-4 rounded-lg \">\n            <div className=\"container mx-auto\">\n                <div className=\"text-blue-800 font-semibold text-base mb-2\">\n                    Probabilistic Linkage Tutorial Navigation:\n                </div>\n                <ol className=\"space-y-2 text-sm\">\n                    {sortedTutorials.map(edge => (\n                        <li\n                            key={edge.node.frontmatter.tutorial_number}\n                            className=\"text-blue-600 text-sm\"\n                        >\n                            {tutorial_number ===\n                            edge.node.frontmatter.tutorial_number ? (\n                                <span className=\"font-bold text-sm\">\n                                    {edge.node.frontmatter.title}\n                                </span>\n                            ) : (\n                                <Link\n                                    to={edge.node.fields.slug}\n                                    className=\"hover:underline\"\n                                >\n                                    {edge.node.frontmatter.title}\n                                </Link>\n                            )}\n                        </li>\n                    ))}\n                </ol>\n            </div>\n        </div>\n    );\n};\n\nexport default TutorialNav;\n"],"names":["_1","md","_2","async","_aq","require","aq_version","aq_packages","toView","aq","Promise","all","map","pkg","forEach","addPackage","addTableMethod","override","_aq_version","_aq_packages","_6","_op","_8","_9","_10","_11","_12","_dt","table","_14","_15","dt","op","derive","month","d","row_number","diff","Seattle","Chicago","select","orderby","view","height","_16","_17","rollup","corr_sf","corr","corr_chi","_18","_19","fold","as","groupby","min","sun","max","avg","average","med","median","skew","s","mean","stdev","objects","_20","_toView","html","DEFAULT_NULL","value","opt","limit","color","columnNames","name","key","td","index","row","maxCellWidth","size","null","style","th","toHTML","runtime","observer","main","module","variable","define","_records_l","uid","fname","sname","dob","town","_records_r","_df_r","records_r","from","_splink_settings","proportion_of_matches","comparison_columns","num_levels","col_name","u_probabilities","m_probabilities","case_expression","fname_l","fname_r","sname_l","sname_r","dob_l","dob_r","town_l","town_r","_df_comparison","get_df_comparison","records_l","_7","df_comparison","_df_gammas","get_df_gammas","splink_settings","df_gammas","get_df_e","term_freqs","_get_df_e","get_match_probability","df_e","df","relocate","after","_get_match_probability","prob_to_log2_bf","log2_bf_to_prob","settings","prior_log2_bg","log2_bayes","reduce","a","cc","gamma_col_name","gamma","m","u","l_val","toLowerCase","r_val","tfs","u_l","u_r","u_new","Math","log2","_get_match_probability_components","num_columns","undefined","length","slice","comparison_vector","gamma_symbols","m_values","u_values","m_symbols","u_symbols","bayes_factors","log2_bayes_factors","col_names","match_probability","lam","col_name_escaped","replace","push","bf","b","_get_m_u_formula_numbers","get_match_probability_components","toPrecision","lam_m","concat","lam_u","m_tex","join","u_tex","p","m_part","_get_m_u_formula_symbols","tex","get_m_u_formula_symbols","_get_comparison_vector_symbols_and_numbers","get_comparison_vector_symbols_and_numbers","get_m_u_formula_numbers","_21","_get_df_comparison","records_as_dict_l","records_as_dict_r","df_l","df_r","suffix","colname_no_suffix","cols_ordered","_get_df_gammas","col_order","_bayes_factor_to_prob","_log2_bf_to_prob","bayes_factor_to_prob","_prob_to_bayes_factor","_prob_to_log2_bf","prob_to_bayes_factor","_first_name_lookup","d3","csv","autoType","then","csv_file","lookup","firstname","freq","_surname_lookup","surname","_term_freqs","first_name_lookup","surname_lookup","_32","_33","child1","import","_3","_row","first_name_l","first_name_r","surname_l","surname_r","date_of_birth_l","other","_overrides","get_waterfall_chart","overrides","_get_waterfall_chart","get_waterfall_chart_data","embed","get_chart_spec","chart_overrides","simplified","data","_get_comparison_column_lookup","_get_waterfall_chart_data","get_waterfall_data_lambda_row","get_waterfall_data_other_rows","get_waterfall_data_final_row","lambda_row","waterfall_data_other_rows","rows_except_final","final_row","cumulative_log2_bayes_factor","_get_waterfall_row_gamma","get_comparison_column_lookup","gamma_key","u_probability","m_probability","gamma_value","this_cc","value_l","value_r","bayes_factor","column_name","gamma_column_name","gamma_index","level_name","log2_bayes_factor","_get_waterfall_data_lambda_row","prob_to_log2_bayes_factor","_get_waterfall_data_other_rows","get_waterfall_row_gamma","keys","Object","filter","includes","_get_waterfall_data_final_row","_get_chart_spec","base_spec","base_spec_2","JSON","parse","stringify","values","spec","type","field","condition","test","expr","format","title","_base_spec","config","continuousHeight","continuousWidth","text","subtitle","transform","window","frame","calculate","layer","mark","encoding","y","width","opacity","tooltip","x","axis","labelExpr","labelAlign","labelPadding","grid","tickBand","sort","orient","y2","fontWeight","labelAngle","baseline","dy","strokeWidth","x2Offset","xOffset","x2","scale","zero","resolve","step","$schema","_embed","_log2","_prob_to_log2_bayes_factor","_log2_bayes_factor_to_prob","log2_b","first_name","_title","_para_1","_para_2","_para_3","_para_4","_para_5","_table","_estimated_probability","match_prob","_para_6","_show_complex","inputs","toggle","label","_waterfall_chart","show_complex","_para_7","_structure","_para_8","_match_prob","_tableData","Generators","parseTableData","observe","notify","keyinput","event","addEventListener","removeEventListener","_parseTableData","querySelectorAll","i","cells","row_data","cell","innerText","trim","accumulator","properties","rowObject","_df_e","rename_dict_keys","tableData","_rename_dict_keys","mname","pc","_fname_case_stmt","dm_intersect","distance","_mname_case_stmt","mname_l","mname_r","_sname_case_stmt","_abs_date_diff_in_years","date_l","date_r","d_l","Date","d_r","abs","_dob_case_stmt","levenshtein","abs_date_diff_in_years","_pc_case_stmt","pc_l","pc_r","fname_case_stmt","mname_case_stmt","sname_case_stmt","dob_case_stmt","pc_case_stmt","_dm","_distance","_dm_intersect","dm","val_l","val_r","arr_l","doubleMetaphone","arr_r","_levenshtein","j","matrix","charAt","_d3","_inputs","G","_","input","child2","Head","props","React","SEO","frontmatter","pageContext","output_order","_createMdxContent","CompactTutorialNav","ObservableNotebook","notebook","TutorialNav","MDXLayout","_ref","_data$allMdx$edges$fi","_data$allMdx$edges$fi2","_data$allMdx$edges$fi3","_data$allMdx$edges$fi4","_data$allMdx$edges$fi5","_data$allMdx$edges$fi6","tutorial_number","useStaticQuery","tutorials","allMdx","edges","edge","node","prevExists","nextExists","prevSlug","find","fields","slug","nextSlug","className","Link","to","mountId","stdlib","Library","library","assign","width1","document","getElementById","clientWidth","resized","width2","customClassName","refs","useRef","useEffect","Runtime","indexOf","Inspector","current","dispose","ref","defaultTitle","description","defaultDescription","image","siteUrl","twitterUsername","site","siteMetadata","seo","url","pathname","content","sortedTutorials"],"sourceRoot":""}